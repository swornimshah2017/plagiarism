define("orb/api",function(){"use strict";var i={layout:[]},n={};return{layout:function(e){i.layout.push(e)},trigger:function(e,t){if(i[e])for(var n=0,o=i[e].length;n<o;n++)i[e][n](t)},config:function(e,t){return 0===arguments.length?n:1===arguments.length?n[e]:void(n[e]=t)}}}),define("orb/lib/_script",function(l){"use strict";var m=1,p={inject:function(e){var t;return(t=document.createElement("script")).src=e,document.getElementsByTagName("head")[0].appendChild(t),t},jsonp:function(e,t,n){var o,i,r,a=!1;o=(n=n||{}).callbackName?n.callbackName:"jsonpcb"+m++,n.timeout&&(r=setTimeout(function(){a=!0,n.error&&n.error()},n.timeout));for(var c=o.split("."),s=c[c.length-1],d=window,u=0,f=c.length;u<f-1;u++)d=d[c[u]];d[s]=function(e){clearTimeout(r),a||t(e),i&&i.parentNode&&i.parentNode.removeChild(i),d[s]=l},i=p.inject(e+(-1===e.indexOf("?")?"?":"&")+"callback="+o)}};return p}),window.orb=window.orb||{},window.name.match(/ orb_fig_referrer=([^ ]*)/)&&(window.orb.referrer=decodeURIComponent(RegExp.$1),window.name=window.name.replace(/ orb_fig_referrer=([^ ]*)/,""));var jsonpTimeout=1e4;window.orb.fig=function(){var u,i={ad:0,ap:0,ck:1,eu:1,mb:0,tb:0,uk:1,df:1},f="ckns_orb_fig_cache",n=!1,r=!1,a=!1,c=!1,l=i,o=[],s=[],d=function(e){return e?l[e]:l};function m(e){return e?decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null:document.cookie}return d.load=function(e,t){d.figFailed()?t&&"function"==typeof t&&t(d):d.isDefault()?(e&&"function"==typeof e&&o.push(e),t&&"function"==typeof t&&s.push(t)):e&&"function"==typeof e&&e(d)},d.isDefault=function(){return l.df?1:0},d.geo={isUK:function(){return d("uk")},isEU:function(){return d("eu")}},d.device={isMobile:function(){return d("mb")},isTablet:function(){return d("tb")}},d.redirect=function(){var i=(window.document.referrer||"").toLowerCase(),e=(window.location.hostname||"").toLowerCase(),r=window.location.href||"";if(window.bbcredirection&&(window.bbcredirection.geo||window.bbcredirection.device)&&i!==r.toLowerCase()){var t=/(^|\.)bbc\.co\.uk$/i.test(e),n=/(^|\.)bbc\.com$/i.test(e),a=/^m\./i.test(e),c=/^(www|pal)\./i.test(e),o=l.uk,s=l.mb,d=r;window.bbcredirection.geo&&(n&&o?d=r.replace(/^(.+?bbc)\.com/i,"$1.co.uk"):t&&!o&&(d=r.replace(/^(.+?bbc)\.co\.uk/i,"$1.com"))),window.bbcpage.loadModule(["orb/cookies"]).then(function(e){if(window.bbcredirection.device){var t=e.get("ckps_d");c&&("m"===t||!t&&s)?d=d.replace(/^(https?:\/\/)(www|pal)\./i,"$1m."):!a||"d"!==t&&(t||s)||(d=d.replace(/^(https?:\/\/)m\./i,"$1www."))}if(d!==r&&i!==d.toLowerCase()){var n=u===window.location.hostname,o=u&&-1<d.indexOf(u);try{e.del(f,{domain:".bbc.co.uk",path:"/"}),e.del(f,{domain:".bbc.com",path:"/"}),n||o||(window.name+=" orb_fig_last_hostname="+window.location.hostname,window.name+=" orb_fig_referrer="+encodeURIComponent(document.referrer),window.location.replace(d))}catch(e){require(["istats-1"],function(e){e.log("redirection_fail","",{})})}}})}},d.updateCacheCookie=function(t){r=!1;var n=new Date;n.setTime(n.getTime()+432e6),window.bbcpage.loadModule(["orb/cookies"]).then(function(e){window.bbccookies.set(f,JSON.stringify(t),{domain:".bbc.co.uk",expires:n,path:"/"}),window.bbccookies.set(f,JSON.stringify(t),{domain:".bbc.com",expires:n,path:"/"})})},d.setData=function(e){l=e,d.redirect()},d.figSuccess=function(e){d.updateCacheCookie(e),d.isCached()||d.setData(e);for(var t=0,n=o.length;t<n;t++)o[t](d)},d.figError=function(){if(n=!0,d.isDefault())for(var e=0,t=s.length;e<t;e++)s[e](d)},d.figFailed=function(){return n},d.isOverridden=function(){return c},d.isCached=function(){return a},d.isStale=function(){return r},d.init=function(){window.name.match(/ orb_fig_last_hostname=([^ ]*)/)&&(u=decodeURIComponent(RegExp.$1),window.name=window.name.replace(/ orb_fig_last_hostname=([^ ]*)/,""));var e=m("ckns_orb_fig");if(e){var o={};return e.replace(/([a-z]{2}):([0-9]+)/g,function(e,t,n){o[t]=+n}),l=o,d.redirect(),c=!0,d}c=!1;var t=m(f);if(t)try{var n=JSON.parse(t);l=n,d.redirect(),a=r=!0}catch(e){l=i,a=!(jsonpTimeout=3e3)}else l=i,a=!(jsonpTimeout=3e3);return!window.orb_fig_blocking||e||t||(window.orb.orb_fig=function(e){d.updateCacheCookie(l=e||i),d.redirect()},document.write('<script src="'+window.orb.figUrl+'"><\/script>')),d},d.init()}(),define("orb/fig",["orb/lib/_script"],function(e){var t=window.orb.fig;return(t.isDefault()||t.isStale())&&e.jsonp(window.orb.figUrl,t.figSuccess,{callbackName:"orb.orb_fig",timeout:jsonpTimeout,error:t.figError}),t}),function(){!function(){function i(e,t){document.addEventListener?e.addEventListener("scroll",t,!1):e.attachEvent("scroll",t)}function v(e){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(e)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function y(e,t){e.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;left:-999px;white-space:nowrap;font-synthesis:none;font:"+t+";"}function r(e){var t=e.a.offsetWidth,n=t+100;return e.f.style.width=n+"px",e.c.scrollLeft=n,e.b.scrollLeft=e.b.scrollWidth+100,e.g!==t&&(e.g=t,!0)}function C(e,t){function n(){var e=o;r(e)&&e.a.parentNode&&t(e.g)}var o=e;i(e.b,n),i(e.c,n),r(e)}function e(e,t){var n=t||{};this.family=e,this.style=n.style||"normal",this.weight=n.weight||"normal",this.stretch=n.stretch||"normal"}var E=null,o=null,n=null,t=null;function a(){return null===t&&(t=!!document.fonts),t}function x(e,t){return[e.style,e.weight,function(){if(null===n){var e=document.createElement("div");try{e.style.font="condensed 100px sans-serif"}catch(e){}n=""!==e.style.font}return n}()?e.stretch:"","100px",t].join(" ")}e.prototype.load=function(e,t){var p=this,h=e||"BESbswy",w=0,b=t||3e3,g=(new Date).getTime();return new Promise(function(l,m){if(a()&&!function(){if(null===o)if(a()&&/Apple/.test(window.navigator.vendor)){var e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent);o=!!e&&parseInt(e[1],10)<603}else o=!1;return o}()){var e=new Promise(function(n,e){!function t(){(new Date).getTime()-g>=b?e():document.fonts.load(x(p,'"'+p.family+'"'),h).then(function(e){1<=e.length?n():setTimeout(t,25)},function(){e()})}()}),t=new Promise(function(e,t){w=setTimeout(t,b)});Promise.race([t,e]).then(function(){clearTimeout(w),l(p)},function(){m(p)})}else n=function(){function n(){var e;(e=-1!=a&&-1!=c||-1!=a&&-1!=s||-1!=c&&-1!=s)&&((e=a!=c&&a!=s&&c!=s)||(null===E&&(e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),E=!!e&&(parseInt(e[1],10)<536||536===parseInt(e[1],10)&&parseInt(e[2],10)<=11)),e=E&&(a==t&&c==t&&s==t||a==d&&c==d&&s==d||a==u&&c==u&&s==u)),e=!e),e&&(f.parentNode&&f.parentNode.removeChild(f),clearTimeout(w),l(p))}var o=new v(h),i=new v(h),r=new v(h),a=-1,c=-1,s=-1,t=-1,d=-1,u=-1,f=document.createElement("div");f.dir="ltr",y(o,x(p,"sans-serif")),y(i,x(p,"serif")),y(r,x(p,"monospace")),f.appendChild(o.a),f.appendChild(i.a),f.appendChild(r.a),document.body.appendChild(f),t=o.a.offsetWidth,d=i.a.offsetWidth,u=r.a.offsetWidth,function e(){if((new Date).getTime()-g>=b)f.parentNode&&f.parentNode.removeChild(f),m(p);else{var t=document.hidden;!0!==t&&void 0!==t||(a=o.a.offsetWidth,c=i.a.offsetWidth,s=r.a.offsetWidth,n()),w=setTimeout(e,50)}}(),C(o,function(e){a=e,n()}),y(o,x(p,'"'+p.family+'",sans-serif')),C(i,function(e){c=e,n()}),y(i,x(p,'"'+p.family+'",serif')),C(r,function(e){s=e,n()}),y(r,x(p,'"'+p.family+'",monospace'))},document.body?n():document.addEventListener?document.addEventListener("DOMContentLoaded",function e(){document.removeEventListener("DOMContentLoaded",e),n()}):document.attachEvent("onreadystatechange",function e(){"interactive"!=document.readyState&&"complete"!=document.readyState||(document.detachEvent("onreadystatechange",e),n())});var n})},"undefined"!=typeof module?module.exports=e:(window.FontFaceObserver=e,window.FontFaceObserver.prototype.load=e.prototype.load)}();var e=navigator.userAgent.toLowerCase();function t(t,e,n){if(-1!=document.documentElement.className.indexOf(e)){var o=new FontFaceObserver(t),i=new FontFaceObserver(t,{weight:"bold"});Promise.all([o.load(),i.load()]).then(function(){document.documentElement.className+=" "+n,require.defined("orb/nav")&&require(["orb/nav"],function(e){e.refresh()})}).catch(function(e){console.log("Error loading "+t+" font: ",e)})}}!(-1!==e.indexOf("msie")&&parseInt(e.split("msie")[1],10)<=10)&&(t("ReithSans","b-reith-sans-font","b-reith-sans-loaded"),t("ReithSerif","b-reith-serif-font","b-reith-serif-loaded"))}(),function(){"use strict";var t=["GB","IM","JE","GY"],n=["AT","BE","BG","CY","CZ","DE","DK","EE","ES","EU","FI","FR","GB","GR","HU","HR","IE","IT","LT","LU","LV","MT","NL","PL","PT","RO","SE","SI","SK"],o=function(e,t){return-1!==e.indexOf(t.toUpperCase())},e={isUKCombined:function(e){return!!e&&o(t,e)},isEU:function(e){return!!e&&o(n,e)}};"function"==typeof define&&define.amd&&define("orb/bbcuser",function(){return e})}();
//# sourceMappingURL=api.min.js.map
